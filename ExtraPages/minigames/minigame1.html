<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        body {
            margin: 0;
            overflow: hidden;
            cursor: none; /* Hide the default cursor */
        }

        canvas {
            display: block;
        }

        @font-face {
            font-family: "Oswald";
            src: url("path/to/your/font/Oswald.ttf") format("truetype");
        }
    </style>
    <title>Mouse Chase Game</title>
</head>
<body>
    <canvas id="gameCanvas"></canvas>

    <!-- Add an audio element for background music -->
    <audio id="backgroundMusic" loop>
        <source src="../../extra/Unreal.mp3" type="audio/mp3">
        Your browser does not support the audio element.
    </audio>

    <script>
        // Get the canvas and its context
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');

        // Set canvas size
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;

        // Create the chasing shape
        const shape = {
            x: 50,
            y: 50,
            size: 40,
            speed: 3 // Initial speed
        };

        // Game state
        let gameOver = false;
        let score = 0;

        // Load shape image
        const shapeImage = new Image();
        shapeImage.src = "../../assets/Sell.png";

        // Load mouse image
        const mouseImage = new Image();
        mouseImage.src = "../../assets/Player.png";

        // Set the size of the player after the image has loaded
        mouseImage.onload = function() {
            mouseImage.width = 100;
            mouseImage.height = 100;

            // Wait for other images to load before starting the game
            Promise.all([shapeImage, backgroundImage].map(img => {
                return new Promise((resolve, reject) => {
                    img.onload = resolve;
                    img.onerror = reject;
                });
            })).then(() => {
                // All images have loaded, start the game
                update();
            }).catch(error => {
                console.error("Error loading images:", error);
            });
        };

        // Load background image
        const backgroundImage = new Image();
        backgroundImage.src = "../../assets/Grass.png";

        // Update function
        function update() {
            if (!gameOver) {
                // Draw background image
                ctx.drawImage(backgroundImage, 0, 0, canvas.width, canvas.height);

                // Calculate the angle to the mouse
                const angle = Math.atan2(shape.y - mouse.y, shape.x - mouse.x);

                // Move the shape towards the mouse with variable speed
                shape.x += Math.cos(angle) * shape.speed;
                shape.y += Math.sin(angle) * shape.speed;

                // Check for collision with the mouse
                const distance = Math.hypot(shape.x - mouse.x, shape.y - mouse.y);
                if (distance < shape.size) {
                    gameOver = true;
                    alert(`Game Over! You were caught. Your score: ${score.toFixed(0)}`);
                }

                // Draw the shape image with increased size
                ctx.drawImage(shapeImage, shape.x - shape.size / 2, shape.y - shape.size / 2, shape.size, shape.size);

                // Increase the size of the shape more slowly
                shape.size += 0.005;

                // Update the score more slowly
                score += 0.1;

                // Increase speed based on the score
                shape.speed = 3 + score * 0.01;

                // Display the score using the custom font
                ctx.font = "20px Oswald, Arial";
                ctx.fillStyle = "white";
                ctx.fillText(`Score: ${score.toFixed(0)}`, 20, 30);

                // Draw the custom mouse cursor
                ctx.drawImage(mouseImage, mouse.x - mouseImage.width / 2, mouse.y - mouseImage.height / 2);

                // Request the next frame
                requestAnimationFrame(update);
            }
        }

        // Mouse object to store mouse coordinates
        const mouse = {
            x: 0,
            y: 0
        };

        // Update mouse coordinates on mousemove
        window.addEventListener('mousemove', (e) => {
            mouse.x = e.clientX;
            mouse.y = e.clientY;
        });

        // Resize canvas on window resize
        window.addEventListener('resize', () => {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        });

        // Play the background music after a short delay to ensure user interaction
        setTimeout(() => {
            const backgroundMusic = document.getElementById('backgroundMusic');
            backgroundMusic.play();
        }, 1000); // Delay in milliseconds
    </script>
</body>
</html>
